<!doctype html>
<html>
<head>
<meta name="author" content="Pierre Quentel">
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jqueryUI.js"></script>
<link rel="stylesheet" href="jqueryUI.css"/>
<link rel="stylesheet" href="style.css"/>
<script type="text/javascript">
$(document).ready(function(){

    $('.audiostrip').each(function(){
    var n = $(this).attr('name')
        $(this).append('<div class="name">'+n+'</div>')
        $(this).append('<div class="horizontal-slider" name="'+n+'" param="Pan"></div>')
        $(this).append('<div class="vertical-slider" name="'+n+'" param="Gain"></div>')
        $(this).append('<div class="toggle" name="'+n+'" param="Mute">Mute</div>')
    })


    $('.vertical-slider').slider({orientation: 'vertical',min:0,max:1,step:0.001,range: "min",value:0.921})
    $('.vertical-slider .ui-slider-handle').each(function(){$(this).append('<div class="value">'+$(this).parent('.vertical-slider').slider('value')+'</div>')})
    $('.vertical-slider').on( "slide", function( event, ui ) {
        $(this).find('.value').text(ui.value)
        sendOsc($(this).attr('param'), $(this).attr('name'), ui.value)
        if ($('.vertical-slider[name='+$(this).attr('name')+']').length > 1) {
            $('.vertical-slider[name='+$(this).attr('name')+']').not(this).slider('value',ui.value).find('.value').text(ui.value)
        }
    });
    $('.horizontal-slider').slider({orientation: 'horizontal',min:-1,max:1,step:0.01})
    $('.horizontal-slider .ui-slider-handle').each(function(){$(this).append('<div class="value">'+$(this).parent('.horizontal-slider').slider('value')+'</div>')})
    $('.horizontal-slider').on( "slide", function( event, ui ) {
        $(this).find('.value').text(ui.value)
        sendOsc($(this).attr('param'), $(this).attr('name'), ui.value)
        if ($('.horizontal-slider[name='+$(this).attr('name')+']').length > 1) {
            $('.horizontal-slider[name='+$(this).attr('name')+']').not(this).slider('value',ui.value).find('.value').text(ui.value)
        }
    });
    
    $('.name').button()
    $('.name').each(function(){
        var name =  $(this).text()
        if ($('#'+name).length != 0) {
            $(this).click(function(){
                var index = $('#tabs a[href="#'+name+'"]').parent().index();
                $('#tabs').tabs({active:index});
            })
        } else {
            $(this).addClass('disabled')
        }
    })
    
    $('.toggle').button()
    $('.toggle').click(function(){
        $(this).toggleClass('enabled');
        if ($(this).hasClass('enabled')) { value = 1.0 } else { value = 0.0 };
        sendOsc($(this).attr('param'), $(this).attr('name'), value);
        if ($('.toggle[name='+$(this).attr('name')+']').length > 1) {
            $('.toggle[name='+$(this).attr('name')+']').not(this).toggleClass('enabled')
        }
    });
    
    $('#tabs').tabs();
    
})

function savePreset() {
    var preset = ''
    $('.horizontal-slider, .vertical-slider').each(function(){
        preset += $(this).attr('param') + ' ' + $(this).attr('name') + ' ' + $(this).slider('value') + ';'
    })
    $('.toggle').each(function(){
        if ($(this).hasClass('enabled')) { var value = 1 } else { var value =0 }
        preset += $(this).attr('param') + ' ' + $(this).attr('name') + ' ' + value + ';'
    })
    document.title = 'Save' + ',' + preset
}
function loadPreset() {
    document.title = 'Load'
}


function setValue(param,name,value) {
    $('[param='+param+'][name='+name+']').each(function(){
    if ($(this).hasClass('horizontal-slider') || $(this).hasClass('vertical-slider') ) {
        $(this).slider('value',value)
        $(this).find('.value').text(value)
    }
    if ($(this).hasClass('toggle')) {
        if (value == 1) {$(this).addClass('enabled')}
        if (value == 0) {$(this).removeClass('enabled')}
    }
    })
}
function sendOsc(param, name, value){
    document.title = param + ',' + name + ',' + value
} 
</script>
</head>

<body>

<div class="name" onclick="loadPreset();">Load</div>
<div class="name" onclick="savePreset();">Save</div>



<div id="tabs">
    <ul>
    <li><a href="#MainMix">MainMix</a></li>
    <li><a href="#Drums">Drums</a></li>
    <li><a href="#Basses">Basses</a></li>
    <li><a href="#Guitars">Guitars</a></li>
    <li><a href="#MxSynths">MxSynths</a></li>
    <li><a href="#MxDrums">MxDrums</a></li>
    <li><a href="#Vocals">Vocals</a></li>
    <li><a href="#Toms">Toms</a></li>
    <li><a href="#Mains">Mains</a></li>
    <li><a href="#MonitorsJeannot">MonitorsJeannot</a></li>
    <li><a href="#MonitorsORL">MonitorsORL</a></li>
    <li><a href="#MonitorsDag">MonitorsDag</a></li>
    </ul>
    <div id="MainMix">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="Drums"></div></td>
        <td><div class="audiostrip"  name="Basses"></div></td>
        <td><div class="audiostrip"  name="Guitars"></div></td>
        <td><div class="audiostrip"  name="MxSynths"></div></td>
        <td><div class="audiostrip"  name="MxDrums"></div></td>
        <td><div class="audiostrip"  name="Vocals"></div></td>
    </tr></table>
    </div>
    <div id="Drums">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="Kick"></div></td>
        <td><div class="audiostrip"  name="Snare"></div></td>
        <td><div class="audiostrip"  name="Toms"></div></td>
        <td><div class="audiostrip"  name="OH-L"></div></td>
        <td><div class="audiostrip"  name="OH-R"></div></td>
        <td><div class="audiostrip main"  name="Drums"></div></td>
    </tr></table>
    </div>
    <div id="Basses">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="Bass_ORL"></div></td>
        <td><div class="audiostrip"  name="FX_ORL"></div></td>
        <td><div class="audiostrip"  name="Bass_Dag"></div></td>
        <td><div class="audiostrip main"  name="Basses"></div></td>
    </tr></table>
    </div>
    <div id="Guitars">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="Guitar_ORL"></div></td>
        <td><div class="audiostrip"  name="Guitar_Dag"></div></td>
        <td><div class="audiostrip main"  name="Guitars"></div></td>
    </tr></table>
    </div>
    <div id="MxSynths">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="MxBass"></div></td>
        <td><div class="audiostrip"  name="MxChords"></div></td>
        <td><div class="audiostrip"  name="MxLead"></div></td>
        <td><div class="audiostrip"  name="MxCtLead"></div></td>
        <td><div class="audiostrip"  name="MxClassical"></div></td>
        <td><div class="audiostrip main"  name="MxSynths"></div></td>
    </tr></table>
    </div>
    <div id="MxDrums">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="MxKicks"></div></td>
        <td><div class="audiostrip"  name="MxSnares"></div></td>
        <td><div class="audiostrip"  name="MxCymbs"></div></td>
        <td><div class="audiostrip"  name="MxCont"></div></td>
        <td><div class="audiostrip"  name="MxSamples"></div></td>
        <td><div class="audiostrip main"  name="MxDrums"></div></td>
    </tr></table>
    </div>
    <div id="Vocals">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="Vx_ORL"></div></td>
        <td><div class="audiostrip"  name="Vx_Dag"></div></td>
        <td><div class="audiostrip"  name="Vx_Jeannot"></div></td>
        <td><div class="audiostrip main"  name="Vocals"></div></td>
    </tr></table>
    </div>
    <div id="Toms">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="Tom1"></div></td>
        <td><div class="audiostrip"  name="Tom2"></div></td>
        <td><div class="audiostrip"  name="Tom3"></div></td>
        <td><div class="audiostrip main"  name="Toms"></div></td>
    </tr></table>
    </div> 
    <div id="Mains">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="FOH"></div></td>
        <td><div class="audiostrip"  name="MonitorsJeannot"></div></td>
        <td><div class="audiostrip"  name="MonitorsORL"></div></td>
        <td><div class="audiostrip"  name="MonitorsDag"></div></td>
    </tr></table>
    </div> 
    <div id="MonitorsJeannot">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="mjMainMix"></div></td>
        <td><div class="audiostrip"  name="mjDrums"></div></td>
        <td><div class="audiostrip"  name="mjVocals"></div></td>
        <td><div class="audiostrip"  name="mjGuitars"></div></td>
        <td><div class="audiostrip"  name="mjBasses"></div></td>
        <td><div class="audiostrip"  name="mjMetronome"></div></td>
        <td><div class="audiostrip main"  name="MonitorsJeannot"></div></td>
    </tr></table>
    </div>
    <div id="MonitorsORL">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="moMainMix"></div></td>
        <td><div class="audiostrip"  name="moDrums"></div></td>
        <td><div class="audiostrip"  name="moBassORL"></div></td>
        <td><div class="audiostrip"  name="moGuitarORL"></div></td>
        <td><div class="audiostrip"  name="moVxORL"></div></td>
        <td><div class="audiostrip"  name="moMetronome"></div></td>
        <td><div class="audiostrip main"  name="MonitorsORL"></div></td>
    </tr></table>
    </div>
    <div id="MonitorsDag">
    <table class="table"><tr>
        <td><div class="audiostrip"  name="mdMainMix"></div></td>
        <td><div class="audiostrip"  name="mdDrums"></div></td>
        <td><div class="audiostrip"  name="mdBassDag"></div></td>
        <td><div class="audiostrip"  name="mdGuitarDag"></div></td>
        <td><div class="audiostrip"  name="mdVoixDag"></div></td>
        <td><div class="audiostrip"  name="mdMetronome"></div></td>
        <td><div class="audiostrip main"  name="MonitorsDag"></div></td>
    </tr></table>
    </div> 
</div>

</body>
</html>	
